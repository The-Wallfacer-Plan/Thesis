Software security has been growing in importance due to the increasing reliance on computer systems, the Internet, and the popularity of smartphones as well as other devices that constitute the Internet of Things.
In general, there are two categories of approaches to securing a system by reducing its surface of vulnerability, namely \emph{testing} and \emph{verification}. The former
 generates test cases to guarantee that the underlying software works properly under certain scenarios.
 The latter models the system in an abstracted description and proves its preservations of certain properties.
  In this thesis, we will describe our efforts at \emph{grey-box fuzz testing} and \emph{type checking based verification} in securing various software.

Firstly, we apply \emph{grey-box fuzz testing} (or \emph{fuzzing}) to detect vulnerabilities introduced by erroneous implementation. We aim to improve the effectiveness of dynamic fuzzing with the help of static program analysis. To fulfill our goal, we build our own grey-box fuzzing framework, Fuzzing Orchestration Toolkit (FOT). Compared to other fuzzing tools, FOT is versatile in the functionalities and can be easily configured or extended for different fuzzing purposes. Till now, FOT has integrated multiple state-of-the-art fuzzing techniques and detected 200+ zero-day vulnerabilities in more than 40 world famous projects, among which 51 CVEs have been assigned.
On top of \FOT, we have also innovatively proposed techniques for two specific fuzzing scenarios.

One scenario is the directed grey-box fuzzing (DGF) which aims to improve the directedness of executing towards user-specified target sites in the program. To emphasize existing challenges in \mbox{directed} fuzzing, we propose \dFOT to feature four desired properties of directed grey-box fuzzers. With the statically analyzed results on the program under test and the target sites, \dFOT applies multiple dynamic strategies for seed prioritization, power scheduling and \mbox{mutation}.
The experimental results on various real-world \mbox{programs} showed that \dFOT reaches the target sites and reproduce the crashes much faster than state-of-the-art grey-box fuzzers such as AFL and AFLGo.

The other scenario is enhancing grey-box fuzzing on multithreaded programs. Due to non-deterministic nature of multithreading, grey-box fuzzers usually work poorly because they are inherently incapable of tracking thread-interleavings.
We therefore present \mtfuzz, a novel thread-aware technique which effectively generates multithreading relevant seeds. \mtfuzz relies on a set of thread-aware instrumentation methods consisting of a stratified exploration-oriented instrumentation and two complementary instrumentations. Our experiments on 12 real-world programs showed that \mtfuzz significantly outperforms the state-of-the-art fuzzer AFL in generating high quality seeds, detecting vulnerabilities, and exposing concurrency bugs.

Secondly, we apply \emph{type checking based verification} to detect those vulnerabilities introduced by logic errors. Particularly, we focus on the information leakage vulnerability caused by inter-app communications on an Android system. 
We propose a lightweight type system featuring Android permission model, where the permissions are statically assigned and are used to enforce access control in the applications. 
The soundness of our type system is proved with respect to noninterference. With this type system, we are able to soundly prove the absence of information leakage among various apps in an Android system.
 Additionally, we also presented a deterministic type inference algorithm for the underlying security type system. 

Finally, based on the attempts that we have made so far, we will briefly discuss the differences of the two applied vulnerability detection approaches in terms of the capability, the practicality, as well as their potential combinations in detecting vulnerabilities for modern software.

